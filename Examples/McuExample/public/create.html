<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lobby</title>
    <script src="sendForm.js"></script>
</head>
<body>
    <form name="creation" method="POST" action="/lobby/">
        <input name="name" type="text" placeholder="name" required>
        <input name="password" type="password" placeholder="password (optional)">
        <input name="maxPlayers" type="number" placeholder="maximal Players" value="5">
        <button type="submit">Create Lobby</button>
        <p id="errors"></p>
    </form>
    <script>
        document.creation.addEventListener('submit',function create(e){
            e.preventDefault();
            sendForm('/lobby/').then(res => res.json())
                .then(lobby => location.href = '/lobby.html?id='+lobby.id+(lobby.password ? '&password='+lobby.password : ''))
                .catch(err => document.getElementById("errors").innerText = err);
            return false;
        });
    </script>
</body>
</html>