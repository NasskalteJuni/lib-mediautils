# What is this?

This is a library, which contains a set of es6 classes allowing you to transmit, mix and analyze media in form of MediaStreams or MediaStreamTracks.
The library is bundled into a single file ('mediautils.js'), which registers the libraries components under the MediaUtilities namespace of the window object.
The provided code is intended to be used for WebRTC based video conferencing, but it can be used for other media processing based scenarios as well.
It is provided as is: Free to use but without any warranty.

# How do I use this?
To use the documented components, make the mediautils.js file available on your website.
Load it as a script like `<script src="/mediautils.js"><script>`.
Bundling it works as well, you would just have to load it. But be careful, some bundlers or minifiers may not support the es6 syntax.
If you can verify, that you webpage contains the library as `window.MediaUtilities`, you can use its components.
The following example creates an AudioMixer, that mixes your Voice into another Track generated by PlaceHolderMediaGenerator.
```
<audio id="output" autoplay></audio>
<button id="start">start</button>
<script>
const start = document.getElementById("start");
start.addEventListener("click", async () => {
    start.parentNode.removeChild(start);
    start = null;
    try{
        const output = document.getElementById("output");
        const voiceTrack = (await navigator.mediaDevices.getUserMedia({audio: true})).getAudioTracks()[0];
        const noiseTrack = new MediaUtilities.PlaceHolderMediaGenerator({enable: true}).output.getAudioTracks()[0];
        const audioMixer = new MediaUtilities.AudioMixer();
        audioMixer.addMedia(voiceTrack);
        audioMixer.addMedia(noiseTrack);
        output.srcObject = audioMixer.out;
    }catch(err){
        console.error(err);
    }
})();
</script>
```

The media processing classes of this library will most likely consume media via addMedia.
Further information regarding their methods is documented here.

# What does this library provide?
This library handles the annoying parts of *WebRTC-*, the *MediaCapture and Streams -* or the *Web Audio -* and *Canvas API*.
Instead of worrying about your Media being a MediaStream, which is still generated by many APIs or an actual MediaStreamTrack,
this library will happily accept any media thrown at it, mix it, transmit it over a peer connection, etc.
The WebRTC connections will take care of Glare handling and adding the only thing that needs to be done is adding media and
forwarding signaling messages.

# Will it be efficient
No, not really. The used APIs do not allow high performance video mixing of hundreds of tracks, they might not even allow two digit user numbers.
This library cannot solve the given problem due to the lack of tools provided

# Examples
Examples for media processing, for example in form of multiparty conference calls, is provided under examples.
The examples can be used as a quick test, if new ideas are working out or if they break something

