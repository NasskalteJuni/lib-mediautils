<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>initializing...</title>
</head>
<body>
    <canvas id="canvas" width="640" height="480" style="width: 640px; height: 480px;"></canvas>
    <script>
        window.connections = new MCUConnectionManager();
        window.mixer = new MCUVideoMixer('#canvas', fps);
        connections.onNewPeerConnection(function(userId, peerConnection){
            peerConnection.addTransceiver(mixer.outputTrack, {direction: 'sendonly', streams: [mixer.out]});
        });
        connections.onTrackHandle(function(userId, track, streams){
            if(track.kind === "video"){
                const stream = streams && streams.length ? streams[0] : new MediaStream([track]);
                mixer.addStream(stream, userId);
            }
        });
        connections.onDisconnect(function(userId){
            mixer.removeStream(userId);
        });
        mixer.mix();
    </script>
</body>
</html>